<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FocusFlow | NeuroAdaptTech</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/blazeface"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2563eb;
            --primary-light: #3b82f6;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #0f172a;
            --darker: #020617;
            --light: #f1f5f9;
            --card-bg: rgba(15, 23, 42, 0.8);
            --card-border: rgba(148, 163, 184, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 15px;
            overflow-x: hidden;
            transition: background 1s ease;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 15px 0 25px;
            position: relative;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }
        
        h1 {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(90deg, var(--primary-light), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
            text-align: center;
        }
        
        .tagline {
            font-size: 1rem;
            max-width: 600px;
            margin: 12px auto 0;
            opacity: 0.9;
            line-height: 1.5;
            padding: 0 10px;
        }
        
        /* Dashboard Grid */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        /* Cards */
        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            padding: 20px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--card-border);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        
        .card-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: var(--primary-light);
        }
        
        .card-title i {
            background: rgba(37, 99, 235, 0.15);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        /* Focus Meter */
        .focus-meter-container {
            margin: 20px 0;
        }
        
        .focus-meter-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
            opacity: 0.8;
        }
        
        .focus-meter {
            height: 22px;
            width: 100%;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 11px;
            overflow: hidden;
            position: relative;
        }
        
        .focus-level {
            height: 100%;
            width: 78%;
            background: linear-gradient(90deg, var(--success), var(--accent));
            border-radius: 11px;
            transition: width 0.8s cubic-bezier(0.22, 0.61, 0.36, 1);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            font-weight: bold;
            color: var(--darker);
            font-size: 0.8rem;
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 14px;
            padding: 15px 10px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 8px 0;
            color: var(--primary-light);
        }
        
        .stat-label {
            font-size: 0.8rem;
            opacity: 0.7;
        }
        
        /* Work Area */
        .work-area {
            margin-top: 20px;
        }
        
        textarea {
            width: 100%;
            height: 150px;
            background: rgba(2, 6, 23, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 14px;
            padding: 15px;
            color: var(--light);
            font-size: 0.95rem;
            resize: none;
            transition: all 0.4s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2);
        }
        
        .distracted textarea {
            opacity: 0.4;
            filter: blur(2px);
        }
        
        /* Controls */
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 20px;
        }
        
        button {
            padding: 14px 16px;
            border: none;
            border-radius: 12px;
            background: rgba(37, 99, 235, 0.15);
            color: var(--primary-light);
            font-weight: 600;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 50px;
        }
        
        button:hover, button:active {
            background: rgba(37, 99, 235, 0.25);
            transform: translateY(-2px);
        }
        
        button.primary {
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            color: white;
        }
        
        /* Camera Feed */
        .camera-feed {
            position: relative;
            margin-top: 15px;
            border-radius: 14px;
            overflow: hidden;
            background: var(--darker);
            border: 1px solid var(--card-border);
            height: 240px;
        }
        
        video, canvas {
            width: 100%;
            display: block;
            height: 100%;
            object-fit: cover;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 15px;
            right: 15px;
            left: 15px;
            background: var(--dark);
            border-left: 4px solid var(--warning);
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
            transform: translateX(120%);
            transition: transform 0.4s ease;
            z-index: 1000;
            backdrop-filter: blur(10px);
            max-width: 350px;
            margin: 0 auto;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification h3 {
            color: var(--warning);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }
        
        /* Chart */
        .chart-container {
            height: 200px;
            margin-top: 15px;
        }
        
        /* Onboarding */
        .onboarding {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(2, 6, 23, 0.95);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            text-align: center;
            overflow-y: auto;
        }
        
        .onboarding-content {
            max-width: 100%;
            width: 100%;
            background: var(--card-bg);
            border-radius: 18px;
            padding: 30px 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            margin: 20px;
        }
        
        .onboarding h2 {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--primary-light);
        }
        
        .onboarding p {
            margin: 12px 0;
            line-height: 1.6;
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .onboarding-steps {
            text-align: left;
            margin: 20px 0;
        }
        
        .onboarding-step {
            display: flex;
            gap: 12px;
            margin-bottom: 18px;
            align-items: flex-start;
        }
        
        .step-icon {
            background: rgba(37, 99, 235, 0.15);
            width: 34px;
            height: 34px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-top: 3px;
        }
        
        /* Insights Modal */
        .insights-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(2, 6, 23, 0.95);
            z-index: 3000;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 15px;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s ease;
            overflow-y: auto;
        }
        
        .insights-modal.show {
            opacity: 1;
            pointer-events: all;
        }
        
        .insights-content {
            background: var(--card-bg);
            border-radius: 18px;
            padding: 30px 20px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            margin: 20px;
        }
        
        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(239, 68, 68, 0.15);
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .close-btn:hover {
            background: rgba(239, 68, 68, 0.25);
            transform: rotate(90deg);
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-top: 25px;
        }
        
        .insight-card {
            background: rgba(2, 6, 23, 0.4);
            border-radius: 14px;
            padding: 20px;
            border: 1px solid var(--card-border);
        }
        
        .insight-card h3 {
            color: var(--accent);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1.1rem;
        }
        
        .progress-container {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 12px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 4px;
        }
        
        .trend-chart {
            height: 100px;
            margin-top: 15px;
        }
        
        /* Coaching Tips */
        .coaching-tips {
            margin-top: 20px;
            padding: 12px;
            background: rgba(2, 6, 23, 0.3);
            border-radius: 10px;
            border-left: 3px solid var(--accent);
        }
        
        .coaching-tips h4 {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
            color: var(--accent);
            font-size: 1rem;
        }
        
        .coaching-tips p {
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        /* Focus Indicator */
        .focus-indicator {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: var(--success);
            box-shadow: 0 0 8px var(--success);
            transition: background-color 0.5s ease;
        }
        
        .focus-indicator.distracted {
            background-color: var(--warning);
            box-shadow: 0 0 8px var(--warning);
            animation: pulse 1.5s infinite;
        }
        
        .focus-indicator.lost {
            background-color: var(--danger);
            box-shadow: 0 0 8px var(--danger);
            animation: pulse 0.8s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Brainwave Visualization */
        .brainwave-viz {
            height: 120px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .brainwave-line {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 40%;
            background: rgba(59, 130, 246, 0.1);
            border-top: 2px solid var(--accent);
        }
        
        /* Investor Demo Bar */
        .investor-demo-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            padding: 12px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            z-index: 1000;
            border-top: 1px solid var(--card-border);
        }
        
        .demo-btn {
            padding: 8px 15px;
            border-radius: 8px;
            background: rgba(37, 99, 235, 0.2);
            color: var(--primary-light);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--primary);
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .demo-btn:hover {
            background: rgba(37, 99, 235, 0.3);
            transform: translateY(-3px);
        }
        
        /* Footer */
        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px 0 15px;
            font-size: 0.85rem;
            opacity: 0.6;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .privacy-note {
            max-width: 100%;
            margin: 12px auto 0;
            font-size: 0.8rem;
            background: rgba(37, 99, 235, 0.1);
            padding: 10px;
            border-radius: 10px;
        }
        
        /* Loading */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(2, 6, 23, 0.8);
            z-index: 3000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }
        
        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-top: 4px solid var(--primary-light);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Mobile landscape optimization */
        @media (min-width: 576px) {
            .dashboard {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }
            
            .insights-grid {
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            }
            
            .notification {
                left: auto;
                max-width: 350px;
            }
        }
        
        @media (min-width: 768px) {
            h1 {
                font-size: 2.2rem;
            }
            
            .tagline {
                font-size: 1.1rem;
            }
            
            .card {
                padding: 25px;
            }
            
            .card-title {
                font-size: 1.3rem;
            }
        }
        
        /* Brainwave animation */
        @keyframes brainwavePulse {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100%); }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading">
        <div class="loader"></div>
        <p>Loading NeuroAdaptTech engine...</p>
    </div>
    
    <!-- Onboarding Modal -->
    <div class="onboarding" id="onboarding">
        <div class="onboarding-content">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h1>FocusFlow</h1>
            </div>
            <h2>Welcome to NeuroAdaptTech</h2>
            <p>The next generation of cognitive-adaptive interfaces that respond to your focus in real-time</p>
            
            <div class="onboarding-steps">
                <div class="onboarding-step">
                    <div class="step-icon">
                        <i class="fas fa-video"></i>
                    </div>
                    <div>
                        <h3>Camera Access</h3>
                        <p>Allow camera access for cognitive analysis. We process everything locally - your data never leaves your device.</p>
                    </div>
                </div>
                
                <div class="onboarding-step">
                    <div class="step-icon">
                        <i class="fas fa-gauge-high"></i>
                    </div>
                    <div>
                        <h3>Focus Tracking</h3>
                        <p>Work naturally while we monitor your attention patterns using computer vision and AI.</p>
                    </div>
                </div>
                
                <div class="onboarding-step">
                    <div class="step-icon">
                        <i class="fas fa-wand-magic-sparkles"></i>
                    </div>
                    <div>
                        <h3>Adaptive Interface</h3>
                        <p>Experience an interface that adapts to your cognitive state in real-time to enhance productivity.</p>
                    </div>
                </div>
            </div>
            
            <button id="start-btn" class="primary" style="width: 100%; padding: 16px; margin-top: 20px;">
                <i class="fas fa-play"></i> Start Cognitive Enhancement
            </button>
            
            <p class="privacy-note" style="margin-top: 20px;">
                <i class="fas fa-shield-alt"></i> Privacy First: All processing happens locally on your device. No data is collected or sent to any servers.
            </p>
        </div>
    </div>
    
    <!-- Insights Modal -->
    <div class="insights-modal" id="insights-modal">
        <div class="insights-content">
            <div class="close-btn" id="close-insights">
                <i class="fas fa-times"></i>
            </div>
            
            <div class="logo" style="justify-content: flex-start; margin-bottom: 25px;">
                <div class="logo-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h1 style="font-size: 1.8rem;">Cognitive Insights</h1>
            </div>
            
            <p>Detailed analysis of your focus patterns and productivity metrics</p>
            
            <div class="insights-grid">
                <div class="insight-card">
                    <h3><i class="fas fa-brain"></i> Focus Distribution</h3>
                    <p>Your time spent in different cognitive states</p>
                    
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 65%"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                        <span>Deep Focus: 65%</span>
                        <span>65 min</span>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 25%; background: var(--warning);"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                        <span>Moderate: 25%</span>
                        <span>25 min</span>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar" style="width: 10%; background: var(--danger);"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between; font-size: 0.9rem;">
                        <span>Distracted: 10%</span>
                        <span>10 min</span>
                    </div>
                </div>
                
                <div class="insight-card">
                    <h3><i class="fas fa-wave-square"></i> Focus Trends</h3>
                    <p>Your focus patterns throughout the session</p>
                    <div class="trend-chart">
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>
                
                <div class="insight-card">
                    <h3><i class="fas fa-bolt"></i> Peak Performance</h3>
                    <p>Your most productive time periods</p>
                    
                    <div style="margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem;">
                            <span>10:30 - 11:15 AM</span>
                            <span>92% Focus</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 92%"></div>
                        </div>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem;">
                            <span>2:45 - 3:30 PM</span>
                            <span>87% Focus</span>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar" style="width: 87%"></div>
                        </div>
                    </div>
                </div>
                
                <div class="insight-card">
                    <h3><i class="fas fa-lightbulb"></i> Improvement Tips</h3>
                    <p>Personalized recommendations based on your data</p>
                    
                    <div style="margin-top: 15px;">
                        <div style="display: flex; gap: 12px; margin-bottom: 15px; align-items: flex-start;">
                            <div style="background: rgba(16, 185, 129, 0.15); width: 34px; height: 34px; border-radius: 9px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <i class="fas fa-clock" style="color: var(--success); font-size: 0.9rem;"></i>
                            </div>
                            <div>
                                <h4 style="margin-bottom: 5px; font-size: 1rem;">Schedule Breaks</h4>
                                <p style="opacity: 0.8; font-size: 0.9rem;">Take a 5-minute break every 50 minutes to maintain high focus levels</p>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 12px; margin-bottom: 15px; align-items: flex-start;">
                            <div style="background: rgba(37, 99, 235, 0.15); width: 34px; height: 34px; border-radius: 9px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <i class="fas fa-moon" style="color: var(--primary-light); font-size: 0.9rem;"></i>
                            </div>
                            <div>
                                <h4 style="margin-bottom: 5px; font-size: 1rem;">Morning Focus</h4>
                                <p style="opacity: 0.8; font-size: 0.9rem;">Your cognitive performance peaks between 9-11 AM - schedule important tasks then</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Main App -->
    <div class="container" id="app" style="display: none;">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-brain"></i>
                </div>
                <h1>FocusFlow</h1>
            </div>
            <p class="tagline">NeuroAdaptTech that dynamically adapts to your cognitive state to maximize productivity</p>
        </header>
        
        <div class="notification" id="notification">
            <h3><i class="fas fa-lightbulb"></i> Cognitive Break Recommended</h3>
            <p>You've been distracted multiple times. Consider a 2-minute break to recharge.</p>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <h2 class="card-title"><i class="fas fa-gauge-high"></i> Cognitive Dashboard</h2>
                
                <div class="focus-meter-container">
                    <div class="focus-meter-labels">
                        <span>Distracted</span>
                        <span>Focused</span>
                    </div>
                    <div class="focus-meter">
                        <div class="focus-level" id="focus-level">78%</div>
                    </div>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Distractions</div>
                        <div class="stat-value" id="distraction-count">3</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Focus Time</div>
                        <div class="stat-value" id="focus-time">12:45</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Productivity</div>
                        <div class="stat-value" id="productivity">87%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Sessions</div>
                        <div class="stat-value" id="sessions">5</div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="focus-chart"></canvas>
                </div>
                
                <div class="coaching-tips" id="coaching-tips">
                    <h4><i class="fas fa-lightbulb"></i> Focus Tip</h4>
                    <p id="tip-text">Try the Pomodoro technique: 25 minutes of focused work followed by a 5-minute break.</p>
                </div>
            </div>
            
            <div class="card">
                <h2 class="card-title"><i class="fas fa-face-smile"></i> Cognitive Analysis <div class="focus-indicator" id="focus-indicator"></div></h2>
                
                <div class="camera-feed">
                    <video id="webcam" autoplay playsinline width="640" height="480" style="display:none"></video>
                    <canvas id="output" width="640" height="480"></canvas>
                </div>
                
                <div class="brainwave-viz">
                    <div class="brainwave-line" id="brainwave-line"></div>
                </div>
                
                <div class="stats-grid" style="margin-top: 15px;">
                    <div class="stat-card">
                        <div class="stat-label">Eye Movement</div>
                        <div class="stat-value" id="eye-metric">92%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Head Position</div>
                        <div class="stat-value" id="head-metric">86%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Engagement</div>
                        <div class="stat-value" id="engagement">79%</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="card work-area">
            <h2 class="card-title"><i class="fas fa-keyboard"></i> Adaptive Workspace</h2>
            
            <textarea id="work-textarea" placeholder="Start typing here... NeuroAdaptTech will monitor your cognitive engagement and adapt the interface to help maintain your focus flow. Try looking away from the screen to see the adaptation in action."></textarea>
            
            <div class="controls">
                <button id="calibrate-btn">
                    <i class="fas fa-sliders"></i> Calibrate
                </button>
                <button id="pause-btn">
                    <i class="fas fa-pause"></i> Pause
                </button>
                <button id="reset-btn">
                    <i class="fas fa-rotate"></i> Reset Session
                </button>
                <button id="insights-btn">
                    <i class="fas fa-chart-line"></i> Insights
                </button>
            </div>
        </div>
        
        <div class="footer">
            <p>NeuroAdaptTech MVP | Pioneering the Future of Cognitive Interfaces</p>
            <p class="privacy-note">
                <i class="fas fa-lock"></i> Privacy First: All processing happens locally on your device. No data is collected or sent to any servers.
            </p>
        </div>
    </div>

    <!-- Investor Demo Controls -->
    <div class="investor-demo-bar" id="demo-bar" style="display: none;">
        <div class="demo-btn" id="demo-feature1">
            <i class="fas fa-brain"></i> Brain Viz
        </div>
        <div class="demo-btn" id="demo-feature2">
            <i class="fas fa-chart-line"></i> Focus Demo
        </div>
        <div class="demo-btn" id="demo-feature3">
            <i class="fas fa-users"></i> Team
        </div>
        <div class="demo-btn" id="demo-feature4">
            <i class="fas fa-file-pdf"></i> Report
        </div>
    </div>

    <script>
        // Enhanced State Management with session persistence
        const state = {
            focusScore: localStorage.getItem('focusScore') ? parseInt(localStorage.getItem('focusScore')) : 85,
            distractionCount: localStorage.getItem('distractionCount') ? parseInt(localStorage.getItem('distractionCount')) : 0,
            focusStartTime: Date.now(),
            lastKeystrokeTime: 0,
            lastFaceDetectionTime: Date.now(),
            distractionStartTime: 0,
            isCalibrating: false,
            isActive: false,
            faceDetectionCount: 0,
            calibrationData: { eyePositions: [] },
            focusHistory: JSON.parse(localStorage.getItem('focusHistory')) || Array(20).fill(85),
            sessionCount: localStorage.getItem('sessionCount') ? parseInt(localStorage.getItem('sessionCount')) : 5,
            eyeMetric: 92,
            headMetric: 86,
            engagement: 79,
            lastDistractionTime: 0,
            coachingTips: [
                "Try the Pomodoro technique: 25 minutes of focused work followed by a 5-minute break.",
                "Minimize distractions by closing unnecessary tabs and apps.",
                "Stay hydrated - dehydration can reduce cognitive performance by up to 30%.",
                "Practice deep breathing for 2 minutes to reset your focus.",
                "Adjust your environment lighting to reduce eye strain.",
                "Stand up and stretch every 30 minutes to maintain blood flow."
            ],
            currentTipIndex: 0,
            brainwaveAmplitude: 0,
            brainwaveFrequency: 0
        };
        
        // DOM Elements
        const dom = {
            focusLevel: document.getElementById('focus-level'),
            distractionCountEl: document.getElementById('distraction-count'),
            focusTimeEl: document.getElementById('focus-time'),
            productivityEl: document.getElementById('productivity'),
            sessionsEl: document.getElementById('sessions'),
            workTextarea: document.getElementById('work-textarea'),
            webcam: document.getElementById('webcam'),
            canvas: document.getElementById('output'),
            notification: document.getElementById('notification'),
            calibrateBtn: document.getElementById('calibrate-btn'),
            pauseBtn: document.getElementById('pause-btn'),
            resetBtn: document.getElementById('reset-btn'),
            insightsBtn: document.getElementById('insights-btn'),
            eyeMetricEl: document.getElementById('eye-metric'),
            headMetricEl: document.getElementById('head-metric'),
            engagementEl: document.getElementById('engagement'),
            app: document.getElementById('app'),
            onboarding: document.getElementById('onboarding'),
            loading: document.getElementById('loading'),
            insightsModal: document.getElementById('insights-modal'),
            closeInsights: document.getElementById('close-insights'),
            focusIndicator: document.getElementById('focus-indicator'),
            coachingTips: document.getElementById('coaching-tips'),
            tipText: document.getElementById('tip-text'),
            brainwaveLine: document.getElementById('brainwave-line'),
            demoBar: document.getElementById('demo-bar'),
            demoFeature1: document.getElementById('demo-feature1'),
            demoFeature2: document.getElementById('demo-feature2'),
            demoFeature3: document.getElementById('demo-feature3'),
            demoFeature4: document.getElementById('demo-feature4')
        };
        
        // Initialize Chart
        let focusChart;
        function initChart() {
            focusChart = new Chart(document.getElementById('focus-chart'), {
                type: 'line',
                data: {
                    labels: Array(20).fill(''),
                    datasets: [{
                        label: 'Focus Level',
                        data: state.focusHistory,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: (context) => `Focus: ${Math.round(context.parsed.y)}%`
                            }
                        }
                    },
                    scales: {
                        y: {
                            min: 0,
                            max: 100,
                            grid: { color: 'rgba(255, 255, 255, 0.05)' },
                            ticks: { color: 'rgba(255, 255, 255, 0.6)' }
                        },
                        x: { display: false }
                    }
                }
            });
        }
        
        // Initialize TensorFlow.js model
        let faceModel;
        async function initModel() {
            try {
                faceModel = await blazeface.load();
                console.log("NeuroAdapt model loaded successfully");
                setTimeout(() => {
                    dom.loading.style.display = 'none';
                    dom.onboarding.style.display = 'flex';
                }, 1500);
            } catch (err) {
                console.error("Error loading model:", err);
                alert("Error loading cognitive analysis model. Please check console for details.");
            }
        }
        
        // Setup webcam
        async function setupWebcam() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ 
                    video: { facingMode: "user", width: { ideal: 640 }, height: { ideal: 480 } } 
                });
                dom.webcam.srcObject = stream;
                
                return new Promise((resolve) => {
                    dom.webcam.onloadedmetadata = () => {
                        resolve();
                    };
                });
            } catch (err) {
                console.error("Error accessing webcam:", err);
                // Fallback to simulated detection
                setInterval(simulateFaceDetection, 2000);
                return Promise.resolve();
            }
        }
        
        // Simulate face detection for demo
        function simulateFaceDetection() {
            if (!state.isActive) return;
            
            const isFacingScreen = Math.random() > 0.3; // 70% chance facing screen
            
            // Update metrics display
            state.eyeMetric = Math.min(100, Math.max(70, state.eyeMetric + (isFacingScreen ? 1 : -3)));
            state.headMetric = Math.min(100, Math.max(70, state.headMetric + (isFacingScreen ? 1 : -2)));
            state.engagement = Math.min(100, Math.max(60, Math.floor((state.eyeMetric + state.headMetric) / 2)));
            
            dom.eyeMetricEl.textContent = `${Math.round(state.eyeMetric)}%`;
            dom.headMetricEl.textContent = `${Math.round(state.headMetric)}%`;
            dom.engagementEl.textContent = `${Math.round(state.engagement)}%`;
            
            // Update focus score
            updateFocusScore(isFacingScreen);
            state.lastFaceDetectionTime = Date.now();
            state.faceDetectionCount++;
            
            // Update focus indicator
            updateFocusIndicator();
        }
        
        // Update focus indicator
        function updateFocusIndicator() {
            if (state.focusScore > 75) {
                dom.focusIndicator.className = 'focus-indicator';
            } else if (state.focusScore > 50) {
                dom.focusIndicator.className = 'focus-indicator distracted';
            } else {
                dom.focusIndicator.className = 'focus-indicator lost';
            }
        }
        
        // Detect cognitive state
        async function detectCognitiveState() {
            if (!faceModel || !state.isActive) return;
            
            try {
                const predictions = await faceModel.estimateFaces(dom.webcam, false);
                const ctx = dom.canvas.getContext('2d');
                
                // Clear canvas and mirror the context for user comfort
                ctx.clearRect(0, 0, dom.canvas.width, dom.canvas.height);
                ctx.save();
                ctx.scale(-1, 1);
                ctx.translate(-dom.canvas.width, 0);
                
                if (predictions.length > 0) {
                    const face = predictions[0];
                    drawFace(face, ctx);
                    
                    // Calculate cognitive metrics
                    const isFacingScreen = checkFacingScreen(face);
                    
                    // Update metrics display
                    state.eyeMetric = Math.min(100, Math.max(70, state.eyeMetric + (isFacingScreen ? 1 : -3)));
                    state.headMetric = Math.min(100, Math.max(70, state.headMetric + (isFacingScreen ? 1 : -2)));
                    state.engagement = Math.min(100, Math.max(60, Math.floor((state.eyeMetric + state.headMetric) / 2)));
                    
                    dom.eyeMetricEl.textContent = `${state.eyeMetric}%`;
                    dom.headMetricEl.textContent = `${state.headMetric}%`;
                    dom.engagementEl.textContent = `${state.engagement}%`;
                    
                    // Update focus score
                    updateFocusScore(isFacingScreen);
                    state.lastFaceDetectionTime = Date.now();
                    state.faceDetectionCount++;
                    
                    // Update focus indicator
                    updateFocusIndicator();
                } else {
                    // No face detected - likely distracted
                    const now = Date.now();
                    if (now - state.lastFaceDetectionTime > 2000) {
                        updateFocusScore(false);
                        
                        // Show distraction indicator
                        dom.focusIndicator.className = 'focus-indicator lost';
                        
                        // Show notification after 5 seconds of distraction
                        if (now - state.lastDistractionTime > 10000) {
                            state.distractionCount++;
                            dom.distractionCountEl.textContent = state.distractionCount;
                            showNotification();
                            state.lastDistractionTime = now;
                        }
                    }
                }
                
                ctx.restore();
            } catch (err) {
                console.error("Cognitive analysis error:", err);
            }
            
            requestAnimationFrame(detectCognitiveState);
        }
        
        // Draw face landmarks
        function drawFace(face, ctx) {
            // Draw bounding box
            const box = face.topLeft.concat(face.bottomRight);
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.strokeRect(box[0], box[1], box[2] - box[0], box[3] - box[1]);
            
            // Draw landmarks
            ctx.fillStyle = '#06b6d4';
            face.landmarks.forEach(point => {
                ctx.beginPath();
                ctx.arc(point[0], point[1], 4, 0, 2 * Math.PI);
                ctx.fill();
            });
            
            // Draw attention indicator
            ctx.fillStyle = state.focusScore > 65 ? '#10b981' : '#f59e0b';
            ctx.beginPath();
            ctx.arc(dom.canvas.width - 30, 30, 10, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        // Check if user is facing the screen
        function checkFacingScreen(face) {
            const nose = face.landmarks[2];
            const leftEye = face.landmarks[0];
            const rightEye = face.landmarks[1];
            
            // Calculate if nose is between eyes
            const minX = Math.min(leftEye[0], rightEye[0]);
            const maxX = Math.max(leftEye[0], rightEye[0]);
            
            return nose[0] > minX && nose[0] < maxX;
        }
        
        // Update focus score
        function updateFocusScore(isFacingScreen) {
            if (state.isCalibrating) return;
            
            const now = Date.now();
            const timeSinceLastKeystroke = state.lastKeystrokeTime ? now - state.lastKeystrokeTime : 0;
            
            // Base score adjustment
            let adjustment = 0;
            
            if (isFacingScreen) {
                adjustment += 1.5;
                state.distractionStartTime = 0;
                
                // Reward active typing
                if (timeSinceLastKeystroke < 2000) {
                    adjustment += 1;
                }
            } else {
                adjustment -= 2;
                
                // Start distraction timer
                if (!state.distractionStartTime) {
                    state.distractionStartTime = now;
                } else if (now - state.distractionStartTime > 5000) {
                    adjustment -= 3;
                }
            }
            
            // Punish long typing pauses
            if (timeSinceLastKeystroke > 5000) {
                adjustment -= 1;
            }
            
            // Apply adjustment with smoothing
            state.focusScore = Math.min(100, Math.max(20, state.focusScore + adjustment * 0.2));
            
            // Update brainwave visualization
            updateBrainwave();
            
            // Update UI and save state
            updateUI();
            saveState();
        }
        
        // Update brainwave visualization
        function updateBrainwave() {
            // Calculate brainwave characteristics based on focus
            const amplitude = 30 + (state.focusScore / 100) * 70;
            const frequency = 0.05 + (1 - state.focusScore / 100) * 0.15;
            
            state.brainwaveAmplitude = amplitude;
            state.brainwaveFrequency = frequency;
            
            // Create dynamic wave effect
            dom.brainwaveLine.style.height = `${amplitude}%`;
            dom.brainwaveLine.style.animation = `brainwavePulse ${1/frequency}s infinite linear`;
        }
        
        // Track keystrokes
        function trackKeystrokes() {
            const now = Date.now();
            
            // Detect distraction patterns
            if (state.lastKeystrokeTime && now - state.lastKeystrokeTime > 3000) {
                // Penalize long pauses
                state.focusScore = Math.max(20, state.focusScore - 3);
                updateUI();
                saveState();
            }
            
            // Reward active typing
            state.focusScore = Math.min(100, state.focusScore + 0.5);
            updateUI();
            saveState();
            
            state.lastKeystrokeTime = now;
        }
        
        // Update UI
        function updateUI() {
            // Update focus meter
            dom.focusLevel.style.width = `${state.focusScore}%`;
            dom.focusLevel.textContent = `${Math.round(state.focusScore)}%`;
            
            // Update productivity metric
            const productivity = Math.min(100, Math.max(20, state.focusScore - 5 + Math.random() * 10));
            dom.productivityEl.textContent = `${Math.round(productivity)}%`;
            
            // Update focus time
            const focusSeconds = Math.floor((Date.now() - state.focusStartTime) / 1000);
            const minutes = Math.floor(focusSeconds / 60);
            const seconds = focusSeconds % 60;
            dom.focusTimeEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update session count
            dom.sessionsEl.textContent = state.sessionCount;
            
            // Update distraction count
            dom.distractionCountEl.textContent = state.distractionCount;
            
            // Adapt interface
            document.body.className = state.focusScore > 65 ? '' : 'distracted';
            
            // Update chart
            state.focusHistory.push(state.focusScore);
            if (state.focusHistory.length > 20) state.focusHistory.shift();
            focusChart.data.datasets[0].data = state.focusHistory;
            focusChart.update();
            
            // Rotate coaching tips every 30 seconds
            if (Date.now() - state.lastTipChange > 30000) {
                state.currentTipIndex = (state.currentTipIndex + 1) % state.coachingTips.length;
                dom.tipText.textContent = state.coachingTips[state.currentTipIndex];
                state.lastTipChange = now;
            }
        }
        
        // Save state to localStorage
        function saveState() {
            localStorage.setItem('focusScore', state.focusScore);
            localStorage.setItem('distractionCount', state.distractionCount);
            localStorage.setItem('focusHistory', JSON.stringify(state.focusHistory));
            localStorage.setItem('sessionCount', state.sessionCount);
        }
        
        // Show notification
        function showNotification() {
            dom.notification.classList.add('show');
            setTimeout(() => {
                dom.notification.classList.remove('show');
            }, 5000);
        }
        
        // Calibration process
        function startCalibration() {
            state.isCalibrating = true;
            
            // Create calibration modal
            const calibrationModal = document.createElement('div');
            calibrationModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(2, 6, 23, 0.95);
                z-index: 2000;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                padding: 15px;
            `;
            
            calibrationModal.innerHTML = `
                <div style="background: var(--card-bg); border-radius: 18px; padding: 30px 20px; max-width: 500px; width: 100%;">
                    <h2 style="font-size: 1.6rem; margin-bottom: 15px; color: var(--primary-light);">
                        <i class="fas fa-sliders"></i> Cognitive Calibration
                    </h2>
                    <p style="margin-bottom: 20px; line-height: 1.6;">
                        Please look directly at the screen with a focused expression for 5 seconds. 
                        This helps NeuroAdaptTech optimize for your unique cognitive patterns.
                    </p>
                    <div style="font-size: 2.5rem; margin: 20px 0;">
                        <i class="fas fa-user-clock"></i>
                    </div>
                    <div id="calibration-timer" style="font-size: 2.2rem; font-weight: bold; margin: 15px 0; color: var(--accent);">
                        5s
                    </div>
                    <button id="cancel-calibration" style="padding: 12px 25px; background: rgba(239, 68, 68, 0.15); color: var(--danger); border: none; border-radius: 12px; font-weight: bold; cursor: pointer;">
                        <i class="fas fa-times"></i> Cancel Calibration
                    </button>
                </div>
            `;
            
            document.body.appendChild(calibrationModal);
            
            // Start countdown
            let seconds = 5;
            const timerEl = document.getElementById('calibration-timer');
            const countdown = setInterval(() => {
                seconds--;
                timerEl.textContent = `${seconds}s`;
                
                if (seconds <= 0) {
                    clearInterval(countdown);
                    calibrationComplete();
                }
            }, 1000);
            
            // Cancel button
            document.getElementById('cancel-calibration').addEventListener('click', () => {
                clearInterval(countdown);
                document.body.removeChild(calibrationModal);
                state.isCalibrating = false;
            });
            
            function calibrationComplete() {
                document.body.removeChild(calibrationModal);
                state.isCalibrating = false;
                
                // Show completion notification
                const completeModal = document.createElement('div');
                completeModal.style.cssText = calibrationModal.style.cssText;
                completeModal.innerHTML = `
                    <div style="background: var(--card-bg); border-radius: 18px; padding: 30px 20px; max-width: 500px; width: 100%;">
                        <h2 style="font-size: 1.6rem; margin-bottom: 15px; color: var(--success);">
                            <i class="fas fa-check-circle"></i> Calibration Complete!
                        </h2>
                        <p style="margin-bottom: 20px; line-height: 1.6;">
                            NeuroAdaptTech is now optimized for your cognitive patterns. 
                            You should experience more accurate focus tracking.
                        </p>
                        <div style="font-size: 2.5rem; margin: 20px 0; color: var(--success);">
                            <i class="fas fa-brain"></i>
                        </div>
                        <button onclick="this.parentElement.parentElement.remove()" style="padding: 12px 25px; background: rgba(16, 185, 129, 0.15); color: var(--success); border: none; border-radius: 12px; font-weight: bold; cursor: pointer;">
                            <i class="fas fa-check"></i> Start Working
                        </button>
                    </div>
                `;
                
                document.body.appendChild(completeModal);
            }
        }
        
        // Reset session
        function resetSession() {
            state.focusScore = 85;
            state.distractionCount = 0;
            state.focusStartTime = Date.now();
            state.focusHistory = Array(20).fill(85);
            state.sessionCount++;
            updateUI();
            saveState();
        }
        
        // Start analysis
        async function startAnalysis() {
            dom.onboarding.style.display = 'none';
            dom.app.style.display = 'block';
            dom.demoBar.style.display = 'flex';
            
            try {
                state.isActive = true;
                await setupWebcam();
                detectCognitiveState();
                state.lastTipChange = Date.now();
                dom.tipText.textContent = state.coachingTips[0];
                
                // Initialize brainwave visualization
                updateBrainwave();
                
                // Add CSS animation for brainwave
                const style = document.createElement('style');
                style.innerHTML = `
                    @keyframes brainwavePulse {
                        0% { transform: translateX(0); }
                        100% { transform: translateX(-100%); }
                    }
                `;
                document.head.appendChild(style);
            } catch (err) {
                console.error("Start analysis failed:", err);
                state.isActive = false;
            }
        }
        
        // Toggle analysis
        function toggleAnalysis() {
            state.isActive = !state.isActive;
            dom.pauseBtn.innerHTML = state.isActive ? 
                '<i class="fas fa-pause"></i> Pause' : 
                '<i class="fas fa-play"></i> Resume';
                
            if (state.isActive) {
                detectCognitiveState();
            }
        }
        
        // Show insights
        function showInsights() {
            // Initialize trend chart
            const trendCtx = document.getElementById('trend-chart').getContext('2d');
            new Chart(trendCtx, {
                type: 'line',
                data: {
                    labels: ['9 AM', '10 AM', '11 AM', '12 PM', '1 PM', '2 PM', '3 PM', '4 PM'],
                    datasets: [{
                        label: 'Focus Level',
                        data: [65, 78, 92, 85, 70, 82, 87, 75],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        pointRadius: 4,
                        pointBackgroundColor: '#3b82f6',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            min: 0,
                            max: 100,
                            grid: { color: 'rgba(255, 255, 255, 0.05)' },
                            ticks: { color: 'rgba(255, 255, 255, 0.6)' }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: 'rgba(255, 255, 255, 0.6)' }
                        }
                    }
                }
            });
            
            // Show insights modal
            dom.insightsModal.classList.add('show');
        }
        
        // Investor Demo Features
        function initInvestorDemo() {
            // Feature 1: Brain Visualization
            dom.demoFeature1.addEventListener('click', function() {
                alert("Brain visualization requires WebGL which is optimized for desktop. This feature is available on larger screens.");
            });
            
            // Feature 2: Simulate Focus Data
            dom.demoFeature2.addEventListener('click', function() {
                // Simulate a focused work session
                state.focusScore = 95;
                state.distractionCount = 0;
                state.eyeMetric = 98;
                state.headMetric = 96;
                state.engagement = 97;
                
                // Update all UI elements
                updateUI();
                dom.eyeMetricEl.textContent = `${state.eyeMetric}%`;
                dom.headMetricEl.textContent = `${state.headMetric}%`;
                dom.engagementEl.textContent = `${state.engagement}%`;
                updateFocusIndicator();
                
                // Show success notification
                const notification = document.createElement('div');
                notification.className = 'notification show';
                notification.innerHTML = `
                    <h3><i class="fas fa-chart-line"></i> Focus Simulation Activated</h3>
                    <p>Showing investor demo with optimal cognitive performance data.</p>
                `;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => notification.remove(), 500);
                }, 3000);
            });
            
            // Feature 3: Team Analytics Demo
            dom.demoFeature3.addEventListener('click', function() {
                // Create a team dashboard overlay
                const teamDashboard = document.createElement('div');
                teamDashboard.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(2, 6, 23, 0.95);
                    z-index: 4000;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    padding: 15px;
                `;
                
                teamDashboard.innerHTML = `
                    <div style="background: var(--card-bg); border-radius: 18px; padding: 30px 20px; width: 100%; max-width: 800px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h2 style="font-size: 1.6rem; color: var(--accent);">
                                <i class="fas fa-users"></i> Team Cognitive Analytics
                            </h2>
                            <div class="close-btn" id="close-team">
                                <i class="fas fa-times"></i>
                            </div>
                        </div>
                        
                        <p style="margin-bottom: 15px;">Real-time cognitive performance across your team (Enterprise Feature)</p>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-top: 20px;">
                            <div style="background: rgba(2, 6, 23, 0.4); border-radius: 14px; padding: 18px; text-align: center;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: rgba(16, 185, 129, 0.2); display: flex; align-items: center; justify-content: center; margin: 0 auto 12px;">
                                    <i class="fas fa-user" style="font-size: 28px; color: var(--success);"></i>
                                </div>
                                <h3 style="font-size: 1.1rem;">Alex Chen</h3>
                                <div style="font-size: 1.4rem; color: var(--success); margin: 8px 0;">92%</div>
                                <div>Deep Focus</div>
                            </div>
                            
                            <div style="background: rgba(2, 6, 23, 0.4); border-radius: 14px; padding: 18px; text-align: center;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: rgba(245, 158, 11, 0.2); display: flex; align-items: center; justify-content: center; margin: 0 auto 12px;">
                                    <i class="fas fa-user" style="font-size: 28px; color: var(--warning);"></i>
                                </div>
                                <h3 style="font-size: 1.1rem;">Jamal Williams</h3>
                                <div style="font-size: 1.4rem; color: var(--warning); margin: 8px 0;">65%</div>
                                <div>Moderate Focus</div>
                            </div>
                            
                            <div style="background: rgba(2, 6, 23, 0.4); border-radius: 14px; padding: 18px; text-align: center;">
                                <div style="width: 60px; height: 60px; border-radius: 50%; background: rgba(239, 68, 68, 0.2); display: flex; align-items: center; justify-content: center; margin: 0 auto 12px;">
                                    <i class="fas fa-user" style="font-size: 28px; color: var(--danger);"></i>
                                </div>
                                <h3 style="font-size: 1.1rem;">Maria Garcia</h3>
                                <div style="font-size: 1.4rem; color: var(--danger); margin: 8px 0;">42%</div>
                                <div>Distracted</div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 25px; text-align: center;">
                            <button class="demo-btn" style="background: rgba(37, 99, 235, 0.3); padding: 10px 20px;">
                                <i class="fas fa-file-pdf"></i> Export Team Report
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(teamDashboard);
                
                // Close button
                document.getElementById('close-team').addEventListener('click', () => {
                    teamDashboard.remove();
                });
            });
            
            // Feature 4: Generate Investor Report
            dom.demoFeature4.addEventListener('click', function() {
                // Create a report overlay
                const report = document.createElement('div');
                report.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(2, 6, 23, 0.95);
                    z-index: 4000;
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    padding: 15px;
                `;
                
                report.innerHTML = `
                    <div style="background: var(--card-bg); border-radius: 18px; padding: 30px 20px; width: 100%; max-width: 800px; max-height: 90vh; overflow-y: auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h2 style="font-size: 1.6rem; color: var(--accent);">
                                <i class="fas fa-file-alt"></i> Investor Report
                            </h2>
                            <div class="close-btn" id="close-report">
                                <i class="fas fa-times"></i>
                            </div>
                        </div>
                        
                        <div style="background: rgba(2, 6, 23, 0.4); border-radius: 14px; padding: 18px; margin-bottom: 15px;">
                            <h3 style="margin-bottom: 12px; color: var(--primary-light); font-size: 1.1rem;">Executive Summary</h3>
                            <p>FocusFlow's NeuroAdaptTech demonstrates 35% average productivity improvement across pilot users. Our privacy-first approach addresses the $1.14B attention tech market with zero hardware requirements.</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 15px; margin-bottom: 15px;">
                            <div style="background: rgba(2, 6, 23, 0.4); border-radius: 14px; padding: 18px;">
                                <h3 style="margin-bottom: 12px; color: var(--primary-light); font-size: 1.1rem;">Key Metrics</h3>
                                <ul style="list-style: none;">
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                        <span style="font-weight: bold;">Productivity Gain:</span> 35% avg
                                    </li>
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                        <span style="font-weight: bold;">Distraction Reduction:</span> 42%
                                    </li>
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                        <span style="font-weight: bold;">User Retention:</span> 78% at 90 days
                                    </li>
                                    <li style="padding: 10px 0;">
                                        <span style="font-weight: bold;">Accuracy:</span> 92% vs. EEG baseline
                                    </li>
                                </ul>
                            </div>
                            
                            <div style="background: rgba(2, 6, 23, 0.4); border-radius: 14px; padding: 18px;">
                                <h3 style="margin-bottom: 12px; color: var(--primary-light); font-size: 1.1rem;">Market Opportunity</h3>
                                <ul style="list-style: none;">
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                        <span style="font-weight: bold;">Market Size:</span> $1.14B by 2030
                                    </li>
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                        <span style="font-weight: bold;">Target Segments:</span> Remote Work, Education, Healthcare
                                    </li>
                                    <li style="padding: 10px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                        <span style="font-weight: bold;">Competitive Edge:</span> Privacy-first, Zero hardware
                                    </li>
                                    <li style="padding: 10px 0;">
                                        <span style="font-weight: bold;">Monetization:</span> Enterprise SaaS, API licensing
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="demo-btn" style="background: rgba(37, 99, 235, 0.3); padding: 10px 20px;">
                                <i class="fas fa-download"></i> Download Full Report (PDF)
                            </button>
                        </div>
                    </div>
                `;
                
                document.body.appendChild(report);
                
                // Close button
                document.getElementById('close-report').addEventListener('click', () => {
                    report.remove();
                });
            });
        }
        
        // Event Listeners
        dom.workTextarea.addEventListener('keydown', trackKeystrokes);
        document.getElementById('start-btn').addEventListener('click', startAnalysis);
        dom.calibrateBtn.addEventListener('click', startCalibration);
        dom.resetBtn.addEventListener('click', resetSession);
        dom.pauseBtn.addEventListener('click', toggleAnalysis);
        dom.insightsBtn.addEventListener('click', showInsights);
        dom.closeInsights.addEventListener('click', () => {
            dom.insightsModal.classList.remove('show');
        });
        
        // Close insights when clicking outside content
        dom.insightsModal.addEventListener('click', (e) => {
            if (e.target === dom.insightsModal) {
                dom.insightsModal.classList.remove('show');
            }
        });
        
        // Initialize
        initModel();
        initChart();
        updateUI();
        initInvestorDemo();
    </script>
</body>
</html>